@page "/manage-accounts"

@using CodeHub.Services
@inject UserService UserService

<PageTitle>Manage Accounts</PageTitle>

<AuthorizeView Roles="Admin">
    <Authorized>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8">
                    <div class="table-responsive">
                        <table class="table table-striped table-primary">
                            <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Prezývka</th>
                                <th scope="col">Dátum vytvorenia</th>
                                <th scope="col">Rola</th>
                                <th scope="col">E-mail</th>
                                <th colspan="2" scope="col">Akcie</th>
                            </tr>
                            </thead>
                            <tbody>
                            @if (_users != null)
                            {
                                foreach (var user in _users)
                                {
                                    <tr>
                                        <td>@user.Id</td>
                                        <td>@user.Username</td>
                                        <td>@user.CreatedAt</td>
                                        <td>@user.Role</td>
                                        <td>@user.Email</td>
                                        <td><button type="button" class="btn btn-danger" @onclick="@(async () => await DeleteUser(user))"><i class="fa-solid fa-trash-can"></i></button></td>
                                        <td><button type="button" class="btn btn-primary"><i class="fa-solid fa-pen-to-square"></i></button></td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="4">Načítavam..</td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="bg-dark text-white shadow p-3 h-100">
                        <h3>Second Column</h3>
                        <p>This column appears immediately to the right of the table.</p>
                    </div>
                </div>
            </div>
        </div>


    </Authorized>
    <NotAuthorized>
        <div align="center" style="color: ghostwhite">
            <h1>Prístup zamietnutý</h1>
            <p>Nemáte oprávnenie na zobrazenie tejto stránky.</p>
        </div>
    </NotAuthorized>
</AuthorizeView>